<header class="bg-white shadow-md border-b-4 border-amber-600">
    <div class="container mx-auto px-4 py-6 relative">
        <!-- Site title and description -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-serif font-bold text-gray-800 mb-2">
                <a href="{{ .Site.BaseURL }}" class="text-gray-800 hover:text-amber-700 transition-colors">
                    {{ .Site.Params.archiveTitle | default .Site.Title }}
                </a>
            </h1>
            <p class="text-lg text-gray-600 font-light">
                A Digital Archive of Burra's Newspaper Coverage ({{ .Site.Params.dateRange }})
            </p>
            <p class="text-sm text-gray-500 mt-1">
                Compiled by {{ .Site.Params.compiler }} • {{ .Site.Params.totalDocuments }} Historical Documents
            </p>
        </div>
        
        <!-- Mobile menu toggle -->
        <div class="md:hidden">
            <button id="mobile-menu-toggle" aria-controls="mobile-menu-panel" aria-expanded="false" class="inline-flex items-center px-3 py-2 border border-gray-300 rounded text-gray-700 hover:text-amber-700 hover:border-amber-700 absolute left-2 top-2" type="button">
                <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
                <span class="sr-only">Toggle navigation</span>
            </button>
        </div>

        <!-- Navigation menu -->
        <nav id="primary-nav" class="border-t border-gray-200 pt-4 hidden md:block" role="navigation" aria-label="main navigation">
            <ul class="md:flex md:flex-row md:flex-wrap md:items-center md:justify-center md:space-x-8 md:space-y-0 text-sm font-medium">
                {{ range .Site.Menus.main }}
                <li>
                    <a href="{{ .URL }}" 
                       class="text-gray-700 hover:text-amber-700 hover:border-b-2 hover:border-amber-700 pb-1 transition-all duration-200
                              {{ if eq $.Page.RelPermalink .URL }}border-b-2 border-amber-700 text-amber-700{{ end }}">
                        {{ .Name }}
                    </a>
                </li>
                {{ end }}
            </ul>
        </nav>

        <!-- Mobile overlay menu panel -->
        <div id="mobile-menu-panel" class="fixed inset-0 bg-white z-50 hidden md:hidden">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <span class="font-semibold text-gray-800">Menu</span>
                <button id="mobile-menu-close" class="p-2 text-gray-700 hover:text-amber-700" aria-label="Close menu" type="button">
                    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <nav class="p-6" role="navigation" aria-label="mobile navigation">
                <ul class="space-y-4 text-base">
                    {{ range .Site.Menus.main }}
                    <li>
                        <a href="{{ .URL }}" class="block text-gray-800 hover:text-amber-700" data-mobile-link>
                            {{ .Name }}
                        </a>
                    </li>
                    {{ end }}
                </ul>
            </nav>
        </div>
        
        <!-- Search bar (if enabled) -->
        {{ if .Site.Params.enableSearch }}
        <!-- Loading indicator (visible until search index is ready) -->
        <div class="mt-6 flex justify-center">
            <div id="search-loading" class="text-gray-600 text-sm">Loading search index…</div>
        </div>

        <!-- Search UI (hidden until ready) -->
        <div id="search-ui" class="mt-2 flex justify-center" style="display:none;">
            <div class="relative w-full max-w-md">
                <input type="search" 
                       id="search-input" 
                       placeholder="{{ .Site.Params.searchPlaceholder | default "Search the archive..." }}"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                <button type="button" 
                        id="search-button"
                        class="absolute right-2 top-2 text-gray-400 hover:text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </button>
            </div>
        </div>
        {{ end }}
        <script>
        (function(){
            try {
                var btn = document.getElementById('mobile-menu-toggle');
                var panel = document.getElementById('mobile-menu-panel');
                var closeBtn = document.getElementById('mobile-menu-close');
                function openPanel(){
                    if (!panel) return;
                    panel.classList.remove('hidden');
                    btn && btn.setAttribute('aria-expanded', 'true');
                    document.body.style.overflow = 'hidden';
                }
                function closePanel(){
                    if (!panel) return;
                    panel.classList.add('hidden');
                    btn && btn.setAttribute('aria-expanded', 'false');
                    document.body.style.overflow = '';
                }
                if (btn) btn.addEventListener('click', openPanel);
                if (closeBtn) closeBtn.addEventListener('click', closePanel);
                panel && panel.addEventListener('click', function(e){
                    if (e.target === panel) closePanel();
                });
                // Close on link click
                panel && panel.querySelectorAll('[data-mobile-link]').forEach(function(a){
                    a.addEventListener('click', function(){ closePanel(); });
                });
                // Close on Escape
                window.addEventListener('keydown', function(e){ if (e.key === 'Escape') closePanel(); });
            } catch (e) {}
        })();
        </script>
    </div>
</header>
